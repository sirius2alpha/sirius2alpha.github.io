<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>GNS3+static router | Sirius' Blog</title>
<meta name=keywords content="GNS3,静态路由"><meta name=description content="这篇文章记录了使用GNS3软件进行静态路由实验"><meta name=author content="sirius1y"><link rel=canonical href=//localhost:1313/posts/notes/network/gns3%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%AE%9E%E9%AA%8C/><link crossorigin=anonymous href=/assets/css/stylesheet.3551607c8eb1ef998f0b6c81d22f9f03dd2c3b8ecaf983e42c023e8d41e39f66.css integrity="sha256-NVFgfI6x75mPC2yB0i+fA90sO47K+YPkLAI+jUHjn2Y=" rel="preload stylesheet" as=style><link rel=icon href=//localhost:1313/images/icon.png><link rel=icon type=image/png sizes=16x16 href=//localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=//localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=//localhost:1313/apple-touch-icon.png><link rel=mask-icon href=//localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=//localhost:1313/posts/notes/network/gns3%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%AE%9E%E9%AA%8C/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="GNS3+static router"><meta property="og:description" content="这篇文章记录了使用GNS3软件进行静态路由实验"><meta property="og:type" content="article"><meta property="og:url" content="//localhost:1313/posts/notes/network/gns3%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%AE%9E%E9%AA%8C/"><meta property="og:image" content="//localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-30T00:00:00+00:00"><meta property="article:modified_time" content="2023-10-30T00:00:00+00:00"><meta property="og:site_name" content="Sirius' Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="//localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="GNS3+static router"><meta name=twitter:description content="这篇文章记录了使用GNS3软件进行静态路由实验"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"//localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"GNS3+static router","item":"//localhost:1313/posts/notes/network/gns3%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%AE%9E%E9%AA%8C/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"GNS3+static router","name":"GNS3\u002bstatic router","description":"这篇文章记录了使用GNS3软件进行静态路由实验","keywords":["GNS3","静态路由"],"articleBody":"预备知识 静态路由和动态路由是什么？ 静态路由\n静态路由是一种手动配置路由信息的方式，其中网络管理员手动指定每个目的地网络的下一跳路由器或出口。这些手动配置的路由信息通常在网络中不经常更改，因此称为\"静态\"路由。静态路由通常用于小型网络或需要特定路由路径的特殊情况，例如，将流量定向到特定服务器或分支机构。\n静态路由的主要优点是简单和易于管理，因为管理员有完全的控制权。然而，它不适用于大型、复杂的网络，因为手动配置路由信息可能变得非常繁琐，并且难以应对网络拓扑的变化。\n动态路由\n动态路由是一种更灵活的路由方式，其中路由器能够自动学习网络拓扑和动态地调整路由表。动态路由协议允许路由器之间交换路由信息，以确定最佳路径到达目的地网络。一些常见的动态路由协议包括RIP（Routing Information Protocol）、OSPF（Open Shortest Path First）和BGP（Border Gateway Protocol）等。\n动态路由的主要优势在于其自动性和适应性。它适用于大型复杂的网络，因为它能够适应网络拓扑的变化，而无需手动更新路由信息。然而，动态路由也可能引入一些安全和性能方面的考虑，因此需要适当的配置和监控。\nGNS3 console 模式介绍 用户 EXEC 模式 该模式下，提示符为“ Router\u003e”，需要了解该模式下可以实用的命令，输入 “ ?”。 特权 EXEC 模式 查看 Cisco 路由器的系统参数，必需进入特权 EXEC 模式，输入命令：\nRouter1\u003e enable Password: Router1# 全局配置模式 若需要修改系统范围内的配置参数，必需进入全局配置模式。输入命令：\nRouter1# configure terminal Router1(config)# 接口配置模式 若要修改网络接口，需要进入接口配置模式。输入命令：\nRouter1(Config)#interface Ethernet 0/0 Router1(config-if)# 返回\nExit 命令：层层返回，即退回到上一个命令层次。\nEnd 命令：从任何模式直接退回到特权 EXEC 模式。\nDisable 命令：从特权 EXEC 模式返回到用户 EXEC 模式。即\nRouter1＃ disable Router1\u003e Logout 命令：从用户 EXEC 模式终止控制台会话，输入 logout。\nGNS3命令简介 # 配置路由 ## 注意！是目标的网络地址，不是IP地址！ R2(config)# ip route \u003c目标网络地址\u003e \u003c子网掩码\u003e \u003c下一跳地址\u003e # 配置IP地址 R2(config)# ip address \u003c设置的地址\u003e \u003c子网掩码\u003e no shutdown：这是interface子配置模式下的命令，用于激活（启用）接口，使其可以传输数据。当接口处于\"shutdown\"状态时，通过输入no shutdown命令，可以将接口从禁用状态切换到启用状态。这通常用于启用已禁用的接口。\nip routing 是一个配置命令，用于在Cisco路由器上启用路由功能。在Cisco路由器上，这个命令通常用于打开路由功能，以使路由器能够根据路由表来决定如何将数据包从一个网络传输到另一个网络。\n环境配置 GNS3环境配置可以参考这篇博文：https://www.cisco.com/c/zh_cn/support/docs/dial-access/floating-static-route/118263-technote-nexthop-00.html\nIOU，IOS下载地址：https://ccie.lol/blog/2016/07/03/cisco-ios-image-download/\n如果使用VirualBox等虚拟环境，遇到问题rc=-19…解决方法：https://stackoverflow.com/questions/38437264/i-cant-execute-command-modprobe-vboxdrv\nGNS3 VM网卡设置：网卡一选择Host-Only，网卡二选择NAT\n静态路由实验 网络拓扑图 先绘制好拓扑图：\n放路由器，然后连线，点击全部start，然后依次打开他们的console。\n设置IP地址 先对router2和4进行配置，设定他们的IP地址就行，操作都是一样的。\nR4#show interface FastEthernet0/0 is administratively down, line protocol is down Hardware is DEC21140, address is ca02.0779.0000 (bia ca02.0779.0000) MTU 1500 bytes, BW 100000 Kbit/sec, DLY 100 usec, reliability 255/255, txload 1/255, rxload 1/255 Encapsulation ARPA, loopback not set Keepalive set (10 sec) Half-duplex, 100Mb/s, 100BaseTX/FX ARP type: ARPA, ARP Timeout 04:00:00 Last input never, output 00:13:07, output hang never Last clearing of \"show interface\" counters never Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0 Queueing strategy: fifo Output queue: 0/40 (size/max) 5 minute input rate 0 bits/sec, 0 packets/sec 5 minute output rate 0 bits/sec, 0 packets/sec 0 packets input, 0 bytes Received 0 broadcasts (0 IP multicasts) 0 runts, 0 giants, 0 throttles 0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored 0 watchdog 0 input packets with dribble condition detected 0 packets output, 0 bytes, 0 underruns R4#configure terminal Enter configuration commands, one per line. End with CNTL/Z. R4(config)#interface FastEthernet0/0 R4(config-if)#ip address 12.5.10.2 255.255.255.0 R4(config-if)#no shut R4(config-if)#ip routing R4(config)# *Oct 26 03:27:34.367: %LINK-3-UPDOWN: Interface FastEthernet0/0, changed state to up *Oct 26 03:27:35.367: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up R4(config)#exit R4# *Oct 26 03:27:38.723: %SYS-5-CONFIG_I: Configured from console by console R4#wr Warning: Attempting to overwrite an NVRAM configuration previously written by a different version of the system image. Overwrite the previous NVRAM configuration?[confirm] Building configuration... [OK] 按照表中设置好各个路由的IP地址之后，用ping命令进行测试：\nR2：能pingR1，ping不通R4\nR4：能ping通R1的12.5.10.1，R1的10.1.1.1不在同一子网，无法ping通；不能ping通R2\nR1：对R2、R4都能ping通\n设置静态路由 问题1：应该设置R2和R4的路由表，告诉他们对方是可达的，而不是设置R1的路由表。\n问题2：设置静态路由ip route出现错误%Inconsistent address and mask\n问题3：R2和R4的静态路由都设置好了，但就是ping不通\n找了很久的原因，最后发现中间R1的Fa0/1没有配好IP地址。\n查看命令show ip interface bried\n配好之后：\n然后就能完成R2 ping R4, R4 ping R2了。\n最后展示一下R2和R4静态路由的设置\n配置方法进入全局配置模式，有(config)标识，然后使用命令ip route [目标网络地址] [子网掩码] [下一跳IP地址]，最后记得wr保存配置。\n联通性测试 ","wordCount":"360","inLanguage":"en","image":"//localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2023-10-30T00:00:00Z","dateModified":"2023-10-30T00:00:00Z","author":{"@type":"Person","name":"sirius1y"},"mainEntityOfPage":{"@type":"WebPage","@id":"//localhost:1313/posts/notes/network/gns3%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%AE%9E%E9%AA%8C/"},"publisher":{"@type":"Organization","name":"Sirius' Blog","logo":{"@type":"ImageObject","url":"//localhost:1313/images/icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=//localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=//localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=//localhost:1313/archives/ title=Archives><span>Archives</span></a></li><li><a href=//localhost:1313/categories/ title=Categories><span>Categories</span></a></li><li><a href=//localhost:1313/posts/ title=Posts><span>Posts</span></a></li><li><a href=//localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=//localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=//localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">GNS3+static router</h1><div class=post-description>这篇文章记录了使用GNS3软件进行静态路由实验</div><div class=post-meta><span title='2023-10-30 00:00:00 +0000 UTC'>October 30, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;360 words&nbsp;·&nbsp;sirius1y</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e9%a2%84%e5%a4%87%e7%9f%a5%e8%af%86 aria-label=预备知识>预备知识</a><ul><li><a href=#%e9%9d%99%e6%80%81%e8%b7%af%e7%94%b1%e5%92%8c%e5%8a%a8%e6%80%81%e8%b7%af%e7%94%b1%e6%98%af%e4%bb%80%e4%b9%88 aria-label=静态路由和动态路由是什么？>静态路由和动态路由是什么？</a></li><li><a href=#gns3-console-%e6%a8%a1%e5%bc%8f%e4%bb%8b%e7%bb%8d aria-label="GNS3 console 模式介绍">GNS3 console 模式介绍</a></li><li><a href=#gns3%e5%91%bd%e4%bb%a4%e7%ae%80%e4%bb%8b aria-label=GNS3命令简介>GNS3命令简介</a></li><li><a href=#%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae aria-label=环境配置>环境配置</a></li></ul></li><li><a href=#%e9%9d%99%e6%80%81%e8%b7%af%e7%94%b1%e5%ae%9e%e9%aa%8c aria-label=静态路由实验>静态路由实验</a><ul><li><a href=#%e7%bd%91%e7%bb%9c%e6%8b%93%e6%89%91%e5%9b%be aria-label=网络拓扑图>网络拓扑图</a></li><li><a href=#%e8%ae%be%e7%bd%aeip%e5%9c%b0%e5%9d%80 aria-label=设置IP地址>设置IP地址</a></li><li><a href=#%e8%ae%be%e7%bd%ae%e9%9d%99%e6%80%81%e8%b7%af%e7%94%b1 aria-label=设置静态路由>设置静态路由</a></li><li><a href=#%e8%81%94%e9%80%9a%e6%80%a7%e6%b5%8b%e8%af%95 aria-label=联通性测试>联通性测试</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=预备知识>预备知识<a hidden class=anchor aria-hidden=true href=#预备知识>#</a></h2><h3 id=静态路由和动态路由是什么>静态路由和动态路由是什么？<a hidden class=anchor aria-hidden=true href=#静态路由和动态路由是什么>#</a></h3><p><strong>静态路由</strong></p><p>静态路由是一种手动配置路由信息的方式，其中网络管理员手动指定每个目的地网络的下一跳路由器或出口。这些手动配置的路由信息通常在网络中不经常更改，因此称为"静态"路由。静态路由通常用于小型网络或需要特定路由路径的特殊情况，例如，将流量定向到特定服务器或分支机构。</p><p>静态路由的主要优点是简单和易于管理，因为管理员有完全的控制权。然而，它不适用于大型、复杂的网络，因为手动配置路由信息可能变得非常繁琐，并且难以应对网络拓扑的变化。</p><p><strong>动态路由</strong></p><p>动态路由是一种更灵活的路由方式，其中路由器能够自动学习网络拓扑和动态地调整路由表。动态路由协议允许路由器之间交换路由信息，以确定最佳路径到达目的地网络。一些常见的动态路由协议包括RIP（Routing Information Protocol）、OSPF（Open Shortest Path First）和BGP（Border Gateway Protocol）等。</p><p>动态路由的主要优势在于其自动性和适应性。它适用于大型复杂的网络，因为它能够适应网络拓扑的变化，而无需手动更新路由信息。然而，动态路由也可能引入一些安全和性能方面的考虑，因此需要适当的配置和监控。</p><h3 id=gns3-console-模式介绍>GNS3 console 模式介绍<a hidden class=anchor aria-hidden=true href=#gns3-console-模式介绍>#</a></h3><p><strong>用户 EXEC 模式</strong>
该模式下，提示符为“ Router>”，需要了解该模式下可以实用的命令，输入
“ ?”。
<strong>特权 EXEC 模式</strong>
查看 Cisco 路由器的系统参数，必需进入特权 EXEC 模式，输入命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Router1&gt; <span class=nb>enable</span>
</span></span><span class=line><span class=cl>Password:
</span></span><span class=line><span class=cl>Router1#
</span></span></code></pre></div><p><strong>全局配置模式</strong>
若需要修改系统范围内的配置参数，必需进入全局配置模式。输入命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Router1# configure terminal
</span></span><span class=line><span class=cl>Router1<span class=o>(</span>config<span class=o>)</span><span class=c1>#</span>
</span></span></code></pre></div><p><strong>接口配置模式</strong>
若要修改网络接口，需要进入接口配置模式。输入命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Router1<span class=o>(</span>Config<span class=o>)</span><span class=c1>#interface Ethernet 0/0</span>
</span></span><span class=line><span class=cl>Router1<span class=o>(</span>config-if<span class=o>)</span><span class=c1>#</span>
</span></span></code></pre></div><p><strong>返回</strong></p><ul><li><p>Exit 命令：层层返回，即退回到上一个命令层次。</p></li><li><p>End 命令：从任何模式直接退回到特权 EXEC 模式。</p></li><li><p>Disable 命令：从特权 EXEC 模式返回到用户 EXEC 模式。即</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Router1＃ disable
</span></span><span class=line><span class=cl>Router1&gt;
</span></span></code></pre></div></li><li><p>Logout 命令：从用户 EXEC 模式终止控制台会话，输入 logout。</p></li></ul><h3 id=gns3命令简介>GNS3命令简介<a hidden class=anchor aria-hidden=true href=#gns3命令简介>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 配置路由</span>
</span></span><span class=line><span class=cl><span class=c1>## 注意！是目标的网络地址，不是IP地址！</span>
</span></span><span class=line><span class=cl>R2<span class=o>(</span>config<span class=o>)</span><span class=c1># ip route &lt;目标网络地址&gt; &lt;子网掩码&gt; &lt;下一跳地址&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 配置IP地址</span>
</span></span><span class=line><span class=cl>R2<span class=o>(</span>config<span class=o>)</span><span class=c1># ip address &lt;设置的地址&gt; &lt;子网掩码&gt; </span>
</span></span></code></pre></div><p><code>no shutdown</code>：这是<code>interface</code>子配置模式下的命令，用于激活（启用）接口，使其可以传输数据。当接口处于"shutdown"状态时，通过输入<code>no shutdown</code>命令，可以将接口从禁用状态切换到启用状态。这通常用于启用已禁用的接口。</p><p><code>ip routing</code> 是一个配置命令，用于在Cisco路由器上启用路由功能。在Cisco路由器上，这个命令通常用于打开路由功能，以使路由器能够根据路由表来决定如何将数据包从一个网络传输到另一个网络。</p><h3 id=环境配置>环境配置<a hidden class=anchor aria-hidden=true href=#环境配置>#</a></h3><p>GNS3环境配置可以参考这篇博文：https://www.cisco.com/c/zh_cn/support/docs/dial-access/floating-static-route/118263-technote-nexthop-00.html</p><p>IOU，IOS下载地址：https://ccie.lol/blog/2016/07/03/cisco-ios-image-download/</p><p>如果使用VirualBox等虚拟环境，遇到问题rc=-19&mldr;解决方法：https://stackoverflow.com/questions/38437264/i-cant-execute-command-modprobe-vboxdrv</p><p>GNS3 VM网卡设置：网卡一选择Host-Only，网卡二选择NAT</p><h2 id=静态路由实验>静态路由实验<a hidden class=anchor aria-hidden=true href=#静态路由实验>#</a></h2><h3 id=网络拓扑图>网络拓扑图<a hidden class=anchor aria-hidden=true href=#网络拓扑图>#</a></h3><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698291587.png alt=image-20231026113947314></p><p>先绘制好拓扑图：</p><p>放路由器，然后连线，点击全部start，然后依次打开他们的console。</p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698306417.png alt=image-20231026154657115></p><h3 id=设置ip地址>设置IP地址<a hidden class=anchor aria-hidden=true href=#设置ip地址>#</a></h3><p>先对router2和4进行配置，设定他们的IP地址就行，操作都是一样的。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>R4#show interface
</span></span><span class=line><span class=cl>FastEthernet0/0 is administratively down, line protocol is down 
</span></span><span class=line><span class=cl>  Hardware is DEC21140, address is ca02.0779.0000 <span class=o>(</span>bia ca02.0779.0000<span class=o>)</span>
</span></span><span class=line><span class=cl>  MTU <span class=m>1500</span> bytes, BW <span class=m>100000</span> Kbit/sec, DLY <span class=m>100</span> usec, 
</span></span><span class=line><span class=cl>     reliability 255/255, txload 1/255, rxload 1/255
</span></span><span class=line><span class=cl>  Encapsulation ARPA, loopback not <span class=nb>set</span>
</span></span><span class=line><span class=cl>  Keepalive <span class=nb>set</span> <span class=o>(</span><span class=m>10</span> sec<span class=o>)</span>
</span></span><span class=line><span class=cl>  Half-duplex, 100Mb/s, 100BaseTX/FX
</span></span><span class=line><span class=cl>  ARP type: ARPA, ARP Timeout 04:00:00
</span></span><span class=line><span class=cl>  Last input never, output 00:13:07, output hang never
</span></span><span class=line><span class=cl>  Last clearing of <span class=s2>&#34;show interface&#34;</span> counters never
</span></span><span class=line><span class=cl>  Input queue: 0/75/0/0 <span class=o>(</span>size/max/drops/flushes<span class=o>)</span><span class=p>;</span> Total output drops: <span class=m>0</span>
</span></span><span class=line><span class=cl>  Queueing strategy: fifo
</span></span><span class=line><span class=cl>  Output queue: 0/40 <span class=o>(</span>size/max<span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=m>5</span> minute input rate <span class=m>0</span> bits/sec, <span class=m>0</span> packets/sec
</span></span><span class=line><span class=cl>  <span class=m>5</span> minute output rate <span class=m>0</span> bits/sec, <span class=m>0</span> packets/sec
</span></span><span class=line><span class=cl>     <span class=m>0</span> packets input, <span class=m>0</span> bytes
</span></span><span class=line><span class=cl>     Received <span class=m>0</span> broadcasts <span class=o>(</span><span class=m>0</span> IP multicasts<span class=o>)</span>
</span></span><span class=line><span class=cl>     <span class=m>0</span> runts, <span class=m>0</span> giants, <span class=m>0</span> throttles 
</span></span><span class=line><span class=cl>     <span class=m>0</span> input errors, <span class=m>0</span> CRC, <span class=m>0</span> frame, <span class=m>0</span> overrun, <span class=m>0</span> ignored
</span></span><span class=line><span class=cl>     <span class=m>0</span> watchdog
</span></span><span class=line><span class=cl>     <span class=m>0</span> input packets with dribble condition detected
</span></span><span class=line><span class=cl>     <span class=m>0</span> packets output, <span class=m>0</span> bytes, <span class=m>0</span> underruns
</span></span><span class=line><span class=cl>          
</span></span><span class=line><span class=cl>R4#configure terminal
</span></span><span class=line><span class=cl>Enter configuration commands, one per line.  End with CNTL/Z.
</span></span><span class=line><span class=cl>R4<span class=o>(</span>config<span class=o>)</span><span class=c1>#interface FastEthernet0/0</span>
</span></span><span class=line><span class=cl>R4<span class=o>(</span>config-if<span class=o>)</span><span class=c1>#ip address 12.5.10.2 255.255.255.0</span>
</span></span><span class=line><span class=cl>R4<span class=o>(</span>config-if<span class=o>)</span><span class=c1>#no shut</span>
</span></span><span class=line><span class=cl>R4<span class=o>(</span>config-if<span class=o>)</span><span class=c1>#ip routing</span>
</span></span><span class=line><span class=cl>R4<span class=o>(</span>config<span class=o>)</span><span class=c1>#</span>
</span></span><span class=line><span class=cl>*Oct <span class=m>26</span> 03:27:34.367: %LINK-3-UPDOWN: Interface FastEthernet0/0, changed state to up
</span></span><span class=line><span class=cl>*Oct <span class=m>26</span> 03:27:35.367: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
</span></span><span class=line><span class=cl>R4<span class=o>(</span>config<span class=o>)</span><span class=c1>#exit</span>
</span></span><span class=line><span class=cl>R4#
</span></span><span class=line><span class=cl>*Oct <span class=m>26</span> 03:27:38.723: %SYS-5-CONFIG_I: Configured from console by console
</span></span><span class=line><span class=cl>R4#wr
</span></span><span class=line><span class=cl>Warning: Attempting to overwrite an NVRAM configuration previously written
</span></span><span class=line><span class=cl>by a different version of the system image.
</span></span><span class=line><span class=cl>Overwrite the previous NVRAM configuration?<span class=o>[</span>confirm<span class=o>]</span>
</span></span><span class=line><span class=cl>Building configuration...
</span></span><span class=line><span class=cl><span class=o>[</span>OK<span class=o>]</span>
</span></span></code></pre></div><p>按照表中设置好各个路由的IP地址之后，用ping命令进行测试：</p><p>R2：能pingR1，ping不通R4</p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698292953.png alt=image-20231026120233150></p><p>R4：能ping通R1的12.5.10.1，R1的10.1.1.1不在同一子网，无法ping通；不能ping通R2</p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698293063.png alt=image-20231026120422958></p><p>R1：对R2、R4都能ping通</p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698293217.png alt=image-20231026120657573></p><h3 id=设置静态路由>设置静态路由<a hidden class=anchor aria-hidden=true href=#设置静态路由>#</a></h3><p>问题1：应该设置R2和R4的路由表，告诉他们对方是可达的，而不是设置R1的路由表。</p><p>问题2：设置静态路由<code>ip route</code>出现错误<code>%Inconsistent address and mask</code></p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698299468.png alt=image-20231026135108406></p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698299492.png alt=image-20231026135132431></p><p>问题3：R2和R4的静态路由都设置好了，但就是ping不通</p><p>找了很久的原因，最后发现中间R1的Fa0/1没有配好IP地址。</p><p>查看命令<code>show ip interface bried</code></p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698305983.png alt=image-20231026153943835></p><p>配好之后：</p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698306010.png alt=image-20231026154010352></p><p>然后就能完成R2 ping R4, R4 ping R2了。</p><p>最后展示一下R2和R4静态路由的设置</p><p>配置方法进入全局配置模式，有(config)标识，然后使用命令<code>ip route [目标网络地址] [子网掩码] [下一跳IP地址]</code>，最后记得wr保存配置。</p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698306149.png alt=image-20231026154229269></p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231026_1698306176.png alt=image-20231026154256526></p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231030_1698634764.png alt=image-20231030105418501></p><h3 id=联通性测试>联通性测试<a hidden class=anchor aria-hidden=true href=#联通性测试>#</a></h3><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231030_1698634418.png alt=image-20231030105304357></p><p><img loading=lazy src=https://raw.githubusercontent.com/sirius2alpha/Typora-pics/master/2023/10/upgit_20231030_1698634403.png alt=image-20231030105323164></p></div><footer class=post-footer><ul class=post-tags><li><a href=//localhost:1313/tags/gns3/>GNS3</a></li><li><a href=//localhost:1313/tags/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/>静态路由</a></li></ul><nav class=paginav><a class=prev href=//localhost:1313/posts/notes/network/gns3+cisco-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%AE%9E%E9%AA%8C/><span class=title>« Prev</span><br><span>GNS3+RIP/OSRF</span>
</a><a class=next href=//localhost:1313/posts/notes/network/network-commands/><span class=title>Next »</span><br><span>常用的网络命令</span></a></nav></footer><script>function createGiscusScript(e){const t=document.createElement("script");Object.entries(e).forEach(([e,n])=>t.setAttribute(e,n)),document.querySelector("article").appendChild(t);const n=document.querySelector('label[for="switch_default"]');n&&n.addEventListener("click",function(){const e=document.body.classList.contains("dark")?"transparent_dark":"light";t.setAttribute("data-theme",e),sendMessage({setConfig:{theme:e}})})}function sendMessage(e){const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")}document.addEventListener("DOMContentLoaded",function(){const e={src:"https://giscus.app/client.js","data-repo":"yunyit/yunyit.github.io","data-repo-id":"R_kgDOKqkPYw","data-category":"Comments","data-category-id":"DIC_kwDOKqkPY84CceDi","data-mapping":"url","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-lang":"en",crossorigin:"anonymous",async:""};e["data-theme"]=document.body.classList.contains("dark")?"transparent_dark":"light",createGiscusScript(e);const t=new MutationObserver(()=>{const e=document.body.classList.contains("dark")?"transparent_dark":"light";sendMessage({setConfig:{theme:e}})});t.observe(document.body,{attributes:!0,attributeFilter:["class"]})})</script></article></main><footer class=footer><span><a href=https://us.umami.is/websites/5e6ac0c1-e2b2-4d0f-9542-b79ac2cf89c4 rel="noopener noreferrer" target=_blank>Analysis</a>
</span>|
<script defer src=https://cloud.umami.is/script.js data-website-id=5e6ac0c1-e2b2-4d0f-9542-b79ac2cf89c4></script><span><a href=https://beian.miit.gov.cn/ target=_blank>渝ICP备2024018631号</a>
</span>|
<span>&copy; 2024 <a href=//localhost:1313/>Sirius' Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>